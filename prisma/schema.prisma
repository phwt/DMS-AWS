datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Document {
  id           Int           @id @default(autoincrement())
  name         String
  type         DocumentType
  state        DocumentState @default(IN_PROGRESS)
  fileLocation String
  Work         Work?
}

enum DocumentType {
  MANUAL
  PROCEDURE
  WORK_INSTRUCTION
  FORM
}

enum DocumentState {
  IN_PROGRESS
  RELEASED
  OBSOLETE
  RECALLED
}

model Work {
  id            Int       @id @default(autoincrement())
  type          WorkType  @default(CREATE)
  state         WorkState @default(NEW)
  detail        String
  create_date   DateTime  @default(now())
  complete_date DateTime?
  documentId    Int?
  document      Document? @relation(fields: [documentId], references: [id])
}

enum WorkType {
  CREATE
  EDIT
  CANCEL
}

enum WorkState {
  NEW
  REVIEW
  COMPLETED
}
