// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Document {
  id    Int           @id @default(autoincrement())
  name  String
  type  DocumentType
  state DocumentState @default(value: IN_PROGRESS)
  Work  Work[]
}

enum DocumentType {
  MANUAL
  PROCEDURE
  WORK_INSTRUCTION
  FORM
}

enum DocumentState {
  IN_PROGRESS
  RELEASED
  OBSOLETE
  RECALLED
}

model Work {
  id            Int       @id @default(autoincrement())
  type          WorkType  @default(value: CREATE)
  state         WorkState @default(value: NEW)
  detail        String
  create_date   DateTime  @default(now())
  complete_date DateTime?
  documentId    Int
  document      Document  @relation(fields: [documentId], references: [id])
}

enum WorkType {
  CREATE
  EDIT
  CANCLE
}

enum WorkState {
  NEW
  REVIEW
  COMPLETED
}
